{% load static %}
{% include 'base.html'%}
{% block title %}
<title>Dashboard</title>
{% endblock %}

{% block content %}
<style>
/* Style inputs rendered via form.as_p */
.card input, 
.card textarea, 
.card select {
    background-color: #2a2a2a;
    color: #ffffff;
    border: 1px solid #444;
    border-radius: 0.5rem;
    padding: 0.5rem 0.75rem;
    width: 100%;
}

/* Focus effect for inputs */
.card input:focus, 
.card textarea:focus, 
.card select:focus {
    border-color: #00d4ff;
    box-shadow: 0 0 5px rgba(0, 212, 255, 0.5);
    outline: none;
}

/* Paragraph spacing inside form.as_p */
.card p {
    margin-bottom: 1rem;
}

/* Button hover effect */
.btn-primary:hover {
    background-color: #00d4ff;
    border-color: #00d4ff;
    color: #000;
    transition: all 0.3s ease;
}

/* Optional: smooth transition for all inputs */
.card input, .card textarea, .card select {
    transition: all 0.2s ease;
}
    
</style>
<div class="container mt-5">
      <div class="d-flex justify-content-between align-items-center">
          <div class="d-none md:d-flex gap-2 mb-2">
              <a href="{% url 'home' %}" class="btn btn-outline-secondary">View Source Code</a>
          </div>
      </div>
      <div class="card bg-dark text-light shadow-lg rounded-4 mx-auto my-4" style="max-width: 500px;">
          <div class="card-body p-4">
              <h4 class="card-title mb-4 text-center fw-bold">Start Your Task</h4>

              <form id="kickoffForm" method="post">
                  {% csrf_token %}
                  {{ form.as_p }}

                  <button type="submit" class="btn btn-primary w-100 fw-bold py-2 mt-3" id="kickoffBtn">
                      <span id="btnText">ðŸš€ Kickoff</span>
                      <span id="btnSpinner" class="spinner-border spinner-border-sm ms-2 d-none" role="status" aria-hidden="true"></span>
                  </button>
              </form>
          </div>
      </div>

      <script>
          document.getElementById('kickoffForm').addEventListener('submit', function(e) {
              const btn = document.getElementById('kickoffBtn');
              const spinner = document.getElementById('btnSpinner');
              const text = document.getElementById('btnText');

              // Show spinner
              spinner.classList.remove('d-none');
              text.textContent = 'Launching...';

              // Disable the button to prevent multiple clicks
              btn.disabled = true;

              // Form will now submit normally
          });
      </script>
      {% endblock %}

